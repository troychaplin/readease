/**
 * Text_Resizer Text Resizer - Frontend Styles
 *
 * These styles apply to both the frontend and the editor.
 *
 * @package Text_Resizer
 */

// =============================================================================
// Text Scaling
// =============================================================================

// Default scale value on :root (1 = no change to theme defaults)
:root {
	--text-resizer-scale: 1;
}

// Scaling styles are injected by JavaScript only when scale !== 1
// This preserves theme defaults at scale 1 and applies multiplier when changed

// =============================================================================
// CSS Custom Properties (Theming API)
// =============================================================================
// Override these variables in your theme CSS to customize the block appearance.
// Example:
//   .wp-block-readease-text-resizer {
//     --text-resizer-border-radius: 8px;
//     --text-resizer-button-bg-hover: rgba(0, 0, 0, 0.1);
//   }

// Block container
.wp-block-readease-text-resizer {
	// Layout
	--text-resizer-gap: 0.75em;
	--text-resizer-controls-gap: 0.25em;

	// Colors
	--text-resizer-button-bg: transparent;
	--text-resizer-button-bg-hover: rgba(0, 0, 0, 0.05);
	--text-resizer-button-bg-active: currentcolor;
	--text-resizer-border-color: currentcolor;
	--text-resizer-track-bg: rgba(0, 0, 0, 0.1);
	--text-resizer-thumb-bg: #fff;

	// Borders
	--text-resizer-border-width: 1px;
	--text-resizer-border-radius: 4px;

	// Sizing
	--text-resizer-min-height: 44px;
	--text-resizer-slider-width: 120px;

	// Transitions
	--text-resizer-transition-duration: 0.15s;

	display: flex;
	flex-wrap: wrap;
	gap: var(--text-resizer-gap);
	align-items: center;

	// Label position: side (default) - row layout
	&--label-side {
		flex-direction: row;
	}

	// Label position: top - column layout
	&--label-top {
		flex-direction: column;
		align-items: flex-start;
	}

	// Mobile-only variant
	&--mobile-only {
		@media (min-width: 782px) {
			display: none;
		}
	}
}

// Label
.wp-block-readease-text-resizer__label {
	font-weight: 500;
	font-size: 0.875em;

	// Visually hidden but accessible to screen readers
	&--hidden {
		position: absolute;
		width: 1px;
		height: 1px;
		padding: 0;
		margin: -1px;
		overflow: hidden;
		clip: rect(0, 0, 0, 0);
		white-space: nowrap;
		border: 0;
	}
}

// Controls container (shared)
.wp-block-readease-text-resizer__controls {
	display: flex;
	align-items: center;
	gap: var(--text-resizer-controls-gap);
}

// =============================================================================
// Buttons Style
// =============================================================================

.wp-block-readease-text-resizer__controls--buttons {
	gap: 0;
}

// Button text (the "A" character) - defined first for proper cascade
.wp-block-readease-text-resizer__button-text {
	line-height: 1;
}

.wp-block-readease-text-resizer__button {
	display: flex;
	align-items: center;
	justify-content: center;
	min-width: var(--text-resizer-min-height);
	min-height: var(--text-resizer-min-height);
	padding: 0.5em;
	border: var(--text-resizer-border-width) solid var(--text-resizer-border-color);
	border-radius: 0;
	background: var(--text-resizer-button-bg);
	color: inherit;
	font-family: inherit;
	font-weight: 500;
	cursor: pointer;
	transition: background-color var(--text-resizer-transition-duration) ease, color var(--text-resizer-transition-duration) ease;

	// Stack borders for adjacent buttons
	&:not(:first-child) {
		margin-inline-start: calc(var(--text-resizer-border-width) * -1);
	}

	// First button rounded on start
	&:first-child {
		border-start-start-radius: var(--text-resizer-border-radius);
		border-end-start-radius: var(--text-resizer-border-radius);
	}

	// Last button rounded on end
	&:last-child {
		border-start-end-radius: var(--text-resizer-border-radius);
		border-end-end-radius: var(--text-resizer-border-radius);
	}

	// Hover state
	&:hover {
		background-color: var(--text-resizer-button-bg-hover);
	}

	// Focus state
	&:focus {
		outline: 2px solid var(--text-resizer-border-color);
		outline-offset: 2px;
		position: relative;
		z-index: 1;
	}

	// Active/pressed state
	&--active {
		background-color: var(--text-resizer-button-bg-active);

		&:hover {
			background-color: var(--text-resizer-button-bg-active);
		}

		.wp-block-readease-text-resizer__button-text {
			// Invert text color when background is currentColor
			filter: invert(1);
		}
	}

	// Size variations for buttons - progressive sizing
	&[data-index="0"] .wp-block-readease-text-resizer__button-text {
		font-size: 0.75em;
	}

	&[data-index="1"] .wp-block-readease-text-resizer__button-text {
		font-size: 1em;
	}

	&[data-index="2"] .wp-block-readease-text-resizer__button-text {
		font-size: 1.25em;
	}

	&[data-index="3"] .wp-block-readease-text-resizer__button-text {
		font-size: 1.5em;
	}

	&[data-index="4"] .wp-block-readease-text-resizer__button-text {
		font-size: 1.75em;
	}
}

// =============================================================================
// Slider Style
// =============================================================================

.wp-block-readease-text-resizer__controls--slider {
	gap: 0.5em;
}

.wp-block-readease-text-resizer__slider {
	width: var(--text-resizer-slider-width);
	height: 8px;
	margin: 0;
	padding: 0;
	border-radius: var(--text-resizer-border-radius);
	background: var(--text-resizer-track-bg);
	appearance: none;
	cursor: pointer;

	// Webkit track
	&::-webkit-slider-runnable-track {
		height: 8px;
		border-radius: var(--text-resizer-border-radius);
		background: var(--text-resizer-track-bg);
	}

	// Webkit thumb
	&::-webkit-slider-thumb {
		width: 20px;
		height: 20px;
		margin-top: -6px;
		border: 2px solid var(--text-resizer-border-color);
		border-radius: 50%;
		background: var(--text-resizer-thumb-bg);
		appearance: none;
		cursor: pointer;
		transition: transform var(--text-resizer-transition-duration) ease;
	}

	// Firefox track
	&::-moz-range-track {
		height: 8px;
		border-radius: var(--text-resizer-border-radius);
		background: var(--text-resizer-track-bg);
	}

	// Firefox thumb
	&::-moz-range-thumb {
		width: 20px;
		height: 20px;
		border: 2px solid var(--text-resizer-border-color);
		border-radius: 50%;
		background: var(--text-resizer-thumb-bg);
		cursor: pointer;
		transition: transform var(--text-resizer-transition-duration) ease;
	}

	// Focus state
	&:focus {
		outline: none;
	}

	&:focus::-webkit-slider-thumb {
		outline: 2px solid var(--text-resizer-border-color);
		outline-offset: 2px;
	}

	&:focus::-moz-range-thumb {
		outline: 2px solid var(--text-resizer-border-color);
		outline-offset: 2px;
	}

	// Hover state
	&:hover::-webkit-slider-thumb {
		transform: scale(1.1);
	}

	&:hover::-moz-range-thumb {
		transform: scale(1.1);
	}
}

// Slider labels (min/max "A" indicators)
.wp-block-readease-text-resizer__slider-label {
	font-weight: 500;
	line-height: 1;

	&--min {
		font-size: 0.75em;
	}

	&--max {
		font-size: 1.25em;
	}
}

// =============================================================================
// Dropdown Style
// =============================================================================

.wp-block-readease-text-resizer__controls--dropdown {
	gap: 0;
}

.wp-block-readease-text-resizer__select {
	min-width: 100px;
	min-height: var(--text-resizer-min-height);
	padding: 0.5em 2em 0.5em 0.75em;
	border: var(--text-resizer-border-width) solid var(--text-resizer-border-color);
	border-radius: var(--text-resizer-border-radius);
	background-color: var(--text-resizer-button-bg);
	background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='currentColor' d='M6 8.825L1.175 4 2.238 2.938 6 6.7 9.763 2.937 10.825 4z'/%3E%3C/svg%3E");
	background-repeat: no-repeat;
	background-position: right 0.75em center;
	background-size: 12px;
	color: inherit;
	font-family: inherit;
	font-size: inherit;
	font-weight: 500;
	line-height: 1.4;
	cursor: pointer;
	appearance: none;
	transition: background-color var(--text-resizer-transition-duration) ease;

	// Hover state
	&:hover {
		background-color: var(--text-resizer-button-bg-hover);
	}

	// Focus state
	&:focus {
		outline: 2px solid var(--text-resizer-border-color);
		outline-offset: 2px;
	}

	// Option styling (limited browser support)
	option {
		background-color: #fff;
		color: #000;
	}
}

// =============================================================================
// Icons Style
// =============================================================================

.wp-block-readease-text-resizer__controls--icons {
	gap: var(--text-resizer-controls-gap);
}

// Icon button text (the "A" for reset) - defined first for proper cascade
.wp-block-readease-text-resizer__icon-text {
	font-weight: 600;
	font-size: 1.125em;
	line-height: 1;
}

.wp-block-readease-text-resizer__icon-button {
	display: flex;
	align-items: center;
	justify-content: center;
	width: var(--text-resizer-min-height);
	height: var(--text-resizer-min-height);
	padding: 0;
	border: var(--text-resizer-border-width) solid var(--text-resizer-border-color);
	border-radius: var(--text-resizer-border-radius);
	background: var(--text-resizer-button-bg);
	color: inherit;
	cursor: pointer;
	transition: background-color var(--text-resizer-transition-duration) ease, opacity var(--text-resizer-transition-duration) ease;

	// SVG icon styling
	svg {
		width: 24px;
		height: 24px;
	}

	// Focus state
	&:focus {
		outline: 2px solid var(--text-resizer-border-color);
		outline-offset: 2px;
	}

	// Disabled state
	&:disabled {
		opacity: 0.4;
		cursor: not-allowed;
	}

	// Hover state (must come after focus and disabled)
	&:hover:not(:disabled) {
		background-color: var(--text-resizer-button-bg-hover);
	}

	// Active/pressed state (reset button)
	&--active {
		background-color: var(--text-resizer-button-bg-active);

		svg {
			filter: invert(1);
		}

		.wp-block-readease-text-resizer__icon-text {
			filter: invert(1);
		}

		&:hover:not(:disabled) {
			background-color: var(--text-resizer-button-bg-active);
		}
	}
}

// =============================================================================
// Reduced Motion
// =============================================================================

@media (prefers-reduced-motion: reduce) {
	.wp-block-readease-text-resizer__button,
	.wp-block-readease-text-resizer__icon-button,
	.wp-block-readease-text-resizer__slider::-webkit-slider-thumb,
	.wp-block-readease-text-resizer__slider::-moz-range-thumb {
		transition: none;
	}
}
